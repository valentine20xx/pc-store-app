<div fxLayout="row" fxLayoutAlign="space-between start">
  <h2 mat-dialog-title>New order</h2>
  <button mat-mini-fab color="primary" mat-dialog-close>
    <mat-icon>close</mat-icon>
  </button>
</div>
<mat-dialog-content>
  <mat-stepper [linear]="true" #stepper>
    <mat-step label="Personal computer specifications" [stepControl]="personalComputerForm" [editable]="stepper.selectedIndex !== (stepper.steps.length - 1)">
      <form [formGroup]="personalComputerForm" fxLayout="column">
        <div fxLayout="row">
          <div fxLayout="column" style="width: 50%;padding-right: 0.5em">
            <mat-form-field appearance="outline">
              <mat-label>Computer case</mat-label>
              <input appAutoTrim matInput formControlName="computerCase">
              <mat-error *ngIf="personalComputerForm.controls.computerCase.hasError('required')">
                Computer case ist ein Pflichtfeld
              </mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Motherboard</mat-label>
              <input appAutoTrim matInput formControlName="motherboard">
              <mat-error *ngIf="personalComputerForm.controls.motherboard.hasError('required')">
                Motherboard ist ein Pflichtfeld
              </mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Processor</mat-label>
              <input appAutoTrim matInput formControlName="processor">
              <mat-error *ngIf="personalComputerForm.controls.processor.hasError('required')">
                Processor ist ein Pflichtfeld
              </mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Graphics card</mat-label>
              <input appAutoTrim matInput formControlName="graphicsCard">
              <mat-error *ngIf="personalComputerForm.controls.graphicsCard.hasError('required')">
                Graphics card ist ein Pflichtfeld
              </mat-error>
            </mat-form-field>
          </div>
          <div fxLayout="column" style="width: 50%;padding-left: 0.5em">
            <mat-form-field appearance="outline">
              <mat-label>Random access memory</mat-label>
              <input appAutoTrim matInput formControlName="randomAccessMemory">
              <mat-error *ngIf="personalComputerForm.controls.randomAccessMemory.hasError('required')">
                Random access memory ist ein Pflichtfeld
              </mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Storage device</mat-label>
              <input appAutoTrim matInput formControlName="storageDevice">
              <mat-error *ngIf="personalComputerForm.controls.storageDevice.hasError('required')">
                Storage device ist ein Pflichtfeld
              </mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Power supply unit</mat-label>
              <input appAutoTrim matInput formControlName="powerSupplyUnit">
              <mat-error *ngIf="personalComputerForm.controls.powerSupplyUnit.hasError('required')">
                Power supply unit ist ein Pflichtfeld
              </mat-error>
            </mat-form-field>
          </div>
        </div>
      </form>
    </mat-step>
    <mat-step label="Client data" [stepControl]="clientDataForm" [editable]="stepper.selectedIndex !== (stepper.steps.length - 1)">
      <form [formGroup]="clientDataForm" fxLayout="column">
        <div fxLayout="row">
          <div fxLayout="column" style="width: 50%;padding-right: 0.5em">
            <mat-form-field appearance="outline">
              <mat-label>Anrede</mat-label>
              <mat-select formControlName="salutation">
                <mat-option *ngFor="let salutation of salutations" [value]="salutation.id">
                  {{salutation.name}}
                </mat-option>
              </mat-select>
              <mat-error *ngIf="clientDataForm.controls.salutation.hasError('required')">
                Anrede ist ein Pflichtfeld
              </mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Vorname</mat-label>
              <input appAutoTrim matInput formControlName="name">
              <mat-error *ngIf="clientDataForm.controls.name.hasError('required')">
                Vorname ist ein Pflichtfeld
              </mat-error>
              <mat-error *ngIf="clientDataForm.controls.name.hasError('pattern')">
                Vorname ist nicht korrekt
              </mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Nachname</mat-label>
              <input appAutoTrim matInput formControlName="surname">
              <mat-error *ngIf="clientDataForm.controls.surname.hasError('required')">
                Nachname ist ein Pflichtfeld
              </mat-error>
              <mat-error *ngIf="clientDataForm.controls.surname.hasError('pattern')">
                Nachname ist nicht korrekt
              </mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Straße</mat-label>
              <input appAutoTrim matInput formControlName="street">
              <mat-error *ngIf="clientDataForm.controls.street.hasError('pattern')">
                Straße ist nicht korrekt
              </mat-error>
              <mat-error *ngIf="clientDataForm.controls.street.hasError('hasHausnummer')">
                Wenn Hausnummer vorhanden, bitte Strasse erfassen
              </mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Hausnummer</mat-label>
              <input appAutoTrim matInput formControlName="houseNumber">
              <mat-error *ngIf="clientDataForm.controls.houseNumber.hasError('pattern')">
                Hausnummer ist nicht korrekt
              </mat-error>
            </mat-form-field>
          </div>
          <div fxLayout="column" style="width: 50%;padding-left: 0.5em">
            <mat-form-field appearance="outline">
              <mat-label>Postleitzahl</mat-label>
              <input appAutoTrim matInput formControlName="zip">
              <mat-error *ngIf="clientDataForm.controls.zip.hasError('pattern')">
                Postleitzahl ist nicht korrekt
              </mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Ort</mat-label>
              <input appAutoTrim matInput formControlName="city">
              <mat-error *ngIf="clientDataForm.controls.city.hasError('pattern')">
                Ort ist nicht korrekt
              </mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Telefon</mat-label>
              <input appAutoTrim matInput formControlName="telephone">
              <mat-error *ngIf="clientDataForm.controls.telephone.hasError('pattern')">
                Telefon ist nicht korrekt
              </mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Handy</mat-label>
              <input appAutoTrim matInput formControlName="cellphone">
              <mat-error *ngIf="clientDataForm.controls.cellphone.hasError('pattern')">
                Handy ist nicht korrekt
              </mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>E-mail</mat-label>
              <input appAutoTrim matInput formControlName="email">
              <mat-error *ngIf="clientDataForm.controls.email.hasError('pattern')">
                E-mail ist nicht korrekt
              </mat-error>
            </mat-form-field>
          </div>
        </div>
      </form>
    </mat-step>
    <mat-step label="Additional files" [editable]="stepper.selectedIndex !== (stepper.steps.length - 1)">
      <button style="margin-bottom: 1em;" mat-raised-button color="primary" (click)="addDocumentClick()">Add a document</button>

      <table mat-table [dataSource]="documentsDataSource " style="width: 100%;border-width: 1px 1px 0 1px;border-style: solid;border-color: rgba(255, 255, 255, 0.12);">
        <ng-container matColumnDef="name" style="width: 30%">
          <th mat-header-cell *matHeaderCellDef>Name</th>
          <td mat-cell *matCellDef="let element"> {{element.name}} </td>
        </ng-container>

        <ng-container matColumnDef="note" style="width: 70%">
          <th mat-header-cell *matHeaderCellDef>Note</th>
          <td mat-cell *matCellDef="let element"> {{element.note}} </td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef style="width: 0">Actions</th>
          <td mat-cell *matCellDef="let element">
            <button mat-mini-fab color="primary">
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="documentsDisplayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: documentsDisplayedColumns;"></tr>
      </table>
    </mat-step>
    <mat-step label="Final overview" fxLayout="column">
      <div class="final-section-item">
        <div class="final-section-title">Personal computer specifications:</div>
        <div class="final-section-sub-item">Computer case: {{ personalComputerForm.controls.computerCase.value }}</div>
        <div class="final-section-sub-item">Motherboard: {{ personalComputerForm.controls.motherboard.value }}</div>
        <div class="final-section-sub-item">Processor: {{ personalComputerForm.controls.processor.value }}</div>
        <div class="final-section-sub-item">Graphics card: {{ personalComputerForm.controls.graphicsCard.value }}</div>
        <div class="final-section-sub-item">Random access memory: {{ personalComputerForm.controls.randomAccessMemory.value }}</div>
        <div class="final-section-sub-item">Storage device: {{ personalComputerForm.controls.storageDevice.value }}</div>
        <div class="final-section-sub-item">Power supply unit: {{ personalComputerForm.controls.powerSupplyUnit.value }}</div>
      </div>
      <div class="final-section-item">
        <div class="final-section-title">Client data:</div>
        <div class="final-section-sub-item">Salutation: {{ clientDataForm.controls.salutation.value | referenceConverter:salutations }}</div>
        <div class="final-section-sub-item">Name: {{ clientDataForm.controls.name.value }}</div>
        <div class="final-section-sub-item">Surname: {{ clientDataForm.controls.surname.value }}</div>
        <div class="final-section-sub-item">Street: {{ clientDataForm.controls.street.value }}</div>
        <div class="final-section-sub-item">House number: {{ clientDataForm.controls.houseNumber.value }}</div>
        <div class="final-section-sub-item">Zip: {{ clientDataForm.controls.zip.value }}</div>
        <div class="final-section-sub-item">City: {{ clientDataForm.controls.city.value }}</div>
        <div class="final-section-sub-item">Telephone: {{ clientDataForm.controls.telephone.value }}</div>
        <div class="final-section-sub-item">Cellphone: {{ clientDataForm.controls.cellphone.value }}</div>
        <div class="final-section-sub-item">eMail: {{ clientDataForm.controls.email.value }}</div>
      </div>
      <div class="final-section-item">
        <div class="final-section-title">Additional files:</div>
        <div *ngFor="let document of this.documentsDataSource.data">
          <div class="final-section-sub-item">Document: {{ document.name }}
            <ng-container *ngIf="document.note != null">, Note: {{ document.note }}</ng-container>
          </div>
        </div>
      </div>
    </mat-step>
  </mat-stepper>
</mat-dialog-content>
<mat-dialog-actions align="end">
  <button mat-raised-button (click)="resetClick()">Reset</button>

  <ng-container *ngIf="stepper.selectedIndex !== 0 && stepper.selectedIndex !== (stepper.steps.length - 1)">
    <button mat-raised-button (click)="stepperPreviousClick()">Back</button>
  </ng-container>

  <ng-container *ngIf="stepper.selectedIndex !== (stepper.steps.length - 1)">
    <button mat-raised-button color="primary" (click)="stepperNextClick()">Next</button>
  </ng-container>

  <ng-container *ngIf="stepper.selectedIndex === (stepper.steps.length - 1)">
    <button mat-raised-button color="primary" (click)="newInternalOrderCreate()">Create</button>
  </ng-container>
</mat-dialog-actions>
